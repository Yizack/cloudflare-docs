---
title: Support for Node.js DNS, Net, and Timer APIs in Workers
description: Node.js APIs from the node:dns, node:net, and node:timers modules are now available when using nodejs_compat.
products:
  - workers
date: 2025-01-28T13:00:00Z
---

import { Render, PackageManagers, TypeScriptExample } from "~/components";

When using a Worker with the [`nodejs_compat`](/workers/runtime-apis/nodejs/) compatibility flag enabled, you can now use the following Node.js APIs:

- [`node:net`](/workers/runtime-apis/nodejs/net/)
- [`node:dns`](/workers/runtime-apis/nodejs/dns/)
- [`node:timers`](/workers/runtime-apis/nodejs/timers/)

#### node:net

This makes it possible to connect to databases such as [MySQL](https://www.mysql.com/), [PostgreSQL](https://www.postgresql.org/),
[Redis](https://redis.io/), or [MongoDB](https://github.com/mongodb/mongo). Though for production use, we recommend that you connect
using TLS, which can be done with the [`cloudflare:sockets`](/workers/runtime-apis/tcp-sockets/#connect)
module, or prefereably by using [Hyperdrive](/hyperdrive), which includes
[connection pooling](/hyperdrive/configuration/how-hyperdrive-works/#connection-pooling)
and [query caching](/hyperdrive/configuration/how-hyperdrive-works/#query-caching).

<TypeScriptExample filename="index.ts">
```ts
import net from "node:net";

const exampleIP = "127.0.0.1";

export default {
  async fetch(req): Promise<Response> {
    const socket = new net.Socket();
    socket.connect(4000, exampleIP, function () {
      console.log("Connected");
    });

    socket.write("Hello, Server!");
    socket.end();

    return new Response("Wrote to server", { status: 200 });
  },
} satisfies ExportedHandler;
````
</TypeScriptExample>

Additionally, you can now use other APIs incliding [`net.BlockList`](https://nodejs.org/api/net.html#class-netblocklist) and
[`net.SocketAddress`](https://nodejs.org/api/net.html#class-netsocketaddress).

Note that [`net.Server`](https://nodejs.org/api/net.html#class-netserver) is not supported.

#### node:dns

You can use [`node:dns`](https://nodejs.org/api/dns.html) for name resolution via [DNS over HTTPS](/1.1.1.1/encryption/dns-over-https/) using
[Cloudflare DNS](https://www.cloudflare.com/application-services/products/dns/) at 1.1.1.1.

<TypeScriptExample filename="index.ts">
```ts
import dns from "node:dns";

dns.lookup("example.org", (_err: any, address: string, ipFamily: number) =>
	console.log(`address: ${address} family: IPv${ipFamily}`));
````

</TypeScriptExample>

All `node:dns` functions are available, except `lookup`, `lookupService`, and `resolve` which throw "Not implemented" errors when called.

#### node:timers

You can use [`node:timers`](https://nodejs.org/api/timers.html) to schedule functions to be called at some future period of time.

This includes [`setTimeout`](https://nodejs.org/api/timers.html#settimeoutcallback-delay-args) for calling a function after a delay,
[`setInterval`](https://nodejs.org/api/timers.html#setintervalcallback-delay-args) for calling a function repeatedly,
and [`setImmediate`](https://nodejs.org/api/timers.html#setimmediatecallback-args) for calling a function in the next iteration of the event loop.

<TypeScriptExample filename="index.ts">
```ts
import timers from "node:timers";

console.log("first");
timers.setTimeout(() => {
  console.log("last");
}, 10);

timers.setTimeout(() => {
  console.log("next");
});
```
</TypeScriptExample>
