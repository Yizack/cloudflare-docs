---
pcx_content_type: concept
title: How proxying works (TBD)
sidebar:
  order: 2
  label: About
---

import { Render, Example } from "~/components";

The **Proxy status** of a DNS record affects how Cloudflare treats incoming traffic to that record.


### Proxied records

When you proxy DNS records through Cloudflare — specifically [A, AAAA, or CNAME records](/dns/manage-dns-records/reference/dns-record-types/#ip-address-resolution) — Cloudflare responds with an [anycast IP address](/fundamentals/concepts/cloudflare-ip-addresses/) **instead of** the value defined on your [DNS table](/dns/manage-dns-records/#dns-records-table). This means that all requests intended for proxied hostnames will go to Cloudflare first and then be forwarded to your origin server.

```mermaid
flowchart LR
accTitle: Connections with Cloudflare
A[Visitor] <-- Connection --> B[Cloudflare global network] <-- Connection --> C[Origin server]
```

This behavior allows Cloudflare to [optimize, cache, and protect](/fundamentals/concepts/how-cloudflare-works/) all requests to your application, as well as protect your origin server from [DDoS attacks](https://www.cloudflare.com/learning/ddos/what-is-a-ddos-attack/).

Cloudflare recommends enabling our proxy for all [A, AAAA, and CNAME](/dns/manage-dns-records/reference/dns-record-types/#ip-address-resolution) records that are used for serving web traffic. Refer to [Proxied DNS records](/dns/manage-dns-records/proxy-status/proxied-records/) for details and expected behavior.

### DNS-only records

When an A, AAAA, or CNAME record is **DNS-only** (also known as being gray-clouded), DNS queries for this record will resolve to the record's normal IP address.

In addition to potentially exposing your origin IP addresses to bad actors and [DDoS attacks](https://www.cloudflare.com/learning/ddos/what-is-a-ddos-attack/), leaving your records as **DNS-only** means that Cloudflare cannot [optimize, cache, and protect](/fundamentals/concepts/how-cloudflare-works/) requests to your application or provide analytics on those requests.

---

## Detailed explanation

<Example>

DNS management for **example.com**:

| Type |  Name  |   Content   | Proxy status |   TTL  |
| :--: | :----: | :---------: | :----------: | :----: |
|  A | `blog` | `192.0.2.1` |   Proxied  | Auto |
|  A | `shop` | `192.0.2.2` |  DNS only  | Auto |
</Example>

In the example DNS table above, there are two DNS records. The record with the name `blog` has the proxy on, while the record named `shop` has the proxy off (that is, **DNS only**).

### Proxied DNS record example

When a browser initiates an HTTP/HTTPS request to `blog.example.com`, a DNS resolver will convert the hostname into an IP address. Since this domain is using Cloudflare as its authoritative DNS provider, the DNS query will be routed to Cloudflare; and because the proxy is on, Cloudflare will answer with an anycast IP address. Subsequently, the browser initiates an HTTP/HTTPS request back to Cloudflare. When Cloudflare receives this request, it performs a lookup to find the matching domain and account configuration and processes the request accordingly. When needed, Cloudflare forwards the request to the configured origin server, which is `192.0.2.1`.

### DNS only record example

When the browser initiates an HTTP/HTTPS request to `shop.example.com`, a DNS resolver will convert the hostname into an IP address. Since this domain is using Cloudflare as its authoritative DNS provider, the DNS query will be routed to Cloudflare; but since the proxy is off (that is, **DNS only**), Cloudflare will answer with `192.0.2.2`. Finally, the browser initiates an HTTP/HTTPS request to the server hosted at `192.0.2.2`.